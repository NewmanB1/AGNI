{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agni-project.org/schemas/svg-bargraph-params.json",
  "title": "BarGraphGenerator Parameters",
  "description": "Config for generating bar graphs. Supports vertical/horizontal, stacked/grouped, pictorial (icons), and interactive/sensor-linked variants. Japanese-inspired defaults: minimal lines, high-contrast colors, optional icons for estimation (e.g., semi-pictographs with partial fills).",
  "type": "object",
  "required": ["data"],
  "additionalProperties": false,
  "properties": {
    "data": {
      "description": "Core dataset. For simple bars: array of numbers. For stacked: array of arrays (sub-bars). For grouped: array of objects { label: str, values: [num,...] }.",
      "oneOf": [
        { "type": "array", "items": { "type": "number" }, "minItems": 1 },
        { "type": "array", "items": { "type": "array", "items": { "type": "number" } } },
        { "type": "array", "items": { 
            "type": "object", 
            "properties": { "label": { "type": "string" }, "values": { "type": "array", "items": { "type": "number" } } },
            "required": ["values"]
          } 
        }
      ]
    },
    "orientation": {
      "type": "string",
      "enum": ["vertical", "horizontal"],
      "default": "vertical",
      "description": "Bar direction. Horizontal common in Japanese texts for left-to-right reading flow."
    },
    "dimensions": {
      "type": "object",
      "properties": {
        "width": { "type": "number", "minimum": 100, "default": 300 },
        "height": { "type": "number", "minimum": 100, "default": 200 },
        "viewBox": { "type": "string", "description": "Custom viewBox override (e.g., '0 0 300 200')" }
      },
      "description": "SVG canvas size. Auto-scales if omitted."
    },
    "axes": {
      "type": "object",
      "properties": {
        "xLabel": { "type": "string", "default": "" },
        "yLabel": { "type": "string", "default": "" },
        "unit": { "type": "string", "description": "Appended to values (e.g., 'students', 'yen')" },
        "maxY": { "type": "number", "description": "Force max scale; auto if omitted" },
        "tickCount": { "type": "integer", "minimum": 2, "default": 5 },
        "gridLines": { "type": "boolean", "default": true, "description": "Show faint grid? Minimal in Japanese style." },
        "color": { "type": "string", "default": "#ccc" }
      },
      "description": "Axis config. Japanese minimalism: thin lines, few ticks."
    },
    "bars": {
      "type": "object",
      "properties": {
        "width": { "type": "number", "minimum": 10, "default": 40, "description": "Bar width (pixels or %)" },
        "gap": { "type": "number", "default": 10, "description": "Space between bars/groups" },
        "colors": { 
          "type": "array", 
          "items": { "type": "string" }, 
          "default": ["#0077b6", "#00a896", "#f4a261"], 
          "description": "Palette cycle. Japanese-inspired: cool blues/greens for harmony." 
        },
        "border": { "type": "object", "properties": { "width": { "type": "number" }, "color": { "type": "string" } } },
        "roundedCorners": { "type": "number", "default": 5, "description": "Radius for softer Japanese aesthetic." }
      },
      "description": "Bar styling."
    },
    "style": {
      "type": "string",
      "enum": ["standard", "stacked", "grouped", "pictorial", "beforeAfter"],
      "default": "standard",
      "description": "Variant: stacked (parts/whole), grouped (side-by-side), pictorial (icons), beforeAfter (double bars)."
    },
    "pictorial": {
      "type": "object",
      "description": "For semi-pictograph bars (Japanese texts often use icons for estimation). Only if style='pictorial'.",
      "properties": {
        "icon": { "type": "string", "description": "SVG path or emoji (e.g., 'üçé', or '<path d=\"...\"/>')" },
        "iconsPerUnit": { "type": "integer", "default": 1, "description": "How many icons = 1 data unit?" },
        "remainderStyle": { "type": "string", "enum": ["partialIcon", "fractionLabel", "none"], "default": "partialIcon" },
        "iconSize": { "type": "number", "default": 20 }
      }
    },
    "labels": {
      "type": "object",
      "properties": {
        "categories": { "type": "array", "items": { "type": "string" }, "description": "X-axis labels; auto if omitted" },
        "showValues": { "type": "boolean", "default": true },
        "valuePosition": { "type": "string", "enum": ["top", "inside", "bottom"], "default": "top" },
        "font": { "type": "object", "properties": { "size": { "type": "number" }, "family": { "type": "string" }, "color": { "type": "string" } } },
        "percentage": { "type": "boolean", "default": false, "description": "Show as % of total?" }
      },
      "description": "Text labels. Japanese style: sans-serif, precise but uncluttered."
    },
    "interactions": {
      "type": "object",
      "description": "Active behaviors. Runtime hooks these up (e.g., in player.js).",
      "properties": {
        "hoverHighlight": { "type": "boolean", "default": true, "description": "Enlarge/color-shift on tap/hover" },
        "sensorLink": { 
          "type": "object", 
          "properties": { 
            "sensor": { "type": "string", "enum": ["accelerometer", "gyro", "light", ...] },
            "prop": { "type": "string", "enum": ["height", "color", "position", ...] },
            "mapping": { "type": "string", "description": "Formula, e.g., 'value * 10'" }
          },
          "description": "Link bar height/color to live sensor (e.g., tilt changes bar heights)"
        },
        "hapticOnTap": { "type": "string", "enum": ["short", "long", "pattern:success"], "description": "Vibrate on interaction" },
        "animation": { 
          "type": "object", 
          "properties": { "type": { "enum": ["growFromZero", "morphBeforeAfter"] }, "duration": { "type": "number" } }
        }
      }
    },
    "accessibility": {
      "type": "object",
      "properties": {
        "altText": { "type": "string", "description": "SVG title/desc for screen readers" },
        "ariaLabels": { "type": "boolean", "default": true, "description": "Add ARIA roles" },
        "highContrast": { "type": "boolean", "default": false, "description": "Boost colors for visibility (Japanese minimalism compatible)" }
      },
      "description": "A11y features; auto if possible."
    },
    "cultural": {
      "type": "object",
      "description": "Optional aesthetic tweaks for epistemic pluralism (e.g., Japanese: subtle gradients, no clutter).",
      "properties": {
        "motif": { "type": "string", "enum": ["minimalJapanese", "weavePattern", "farmGrid", ...], "description": "Apply preset (e.g., washi-paper texture on bars)" },
        "colorPalette": { "type": "string", "enum": ["sakura", "zenGarden", "default"] }
      }
    }
  }
}
