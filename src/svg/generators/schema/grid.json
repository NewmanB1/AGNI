{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agni-project.org/schemas/svg-grid-params.json",
  "title": "GridGenerator Parameters",
  "description": "Configuration for generating grid-based visuals: coordinate planes, multiplication arrays, geoboards, area models, place-value charts, and tessellation patterns. Japanese-inspired defaults emphasize thin lines, faint dots, high readability, minimal labels, and subtle color coding for rows/columns or regions.",
  "type": "object",
  "required": ["rows", "columns"],
  "additionalProperties": false,
  "properties": {
    "rows": {
      "type": "integer",
      "minimum": 1,
      "maximum": 50,
      "description": "Number of horizontal divisions (rows)."
    },
    "columns": {
      "type": "integer",
      "minimum": 1,
      "maximum": 50,
      "description": "Number of vertical divisions (columns)."
    },
    "style": {
      "type": "string",
      "enum": ["cartesian", "array", "geoboard", "areaModel", "placeValue", "probability", "tessellation"],
      "default": "cartesian",
      "description": "Preset that influences line style, labeling, and coloring."
    },
    "dimensions": {
      "type": "object",
      "properties": {
        "width": { "type": "number", "minimum": 150, "default": 320 },
        "height": { "type": "number", "minimum": 150, "default": 320 },
        "cellSize": { "type": "number", "minimum": 10, "default": 30, "description": "Pixels per cell; overrides if present" },
        "padding": { "type": "number", "default": 30 }
      }
    },
    "gridLines": {
      "type": "object",
      "properties": {
        "major": {
          "type": "object",
          "properties": {
            "every": { "type": "integer", "default": 5, "description": "Draw major line every N cells" },
            "color": { "type": "string", "default": "#666" },
            "thickness": { "type": "number", "default": 1.5 }
          }
        },
        "minor": {
          "type": "object",
          "properties": {
            "every": { "type": "integer", "default": 1, "description": "1 = every cell" },
            "color": { "type": "string", "default": "#ddd" },
            "thickness": { "type": "number", "default": 0.8 }
          }
        },
        "axis": {
          "type": "object",
          "properties": {
            "x": { "type": "boolean", "default": true },
            "y": { "type": "boolean", "default": true },
            "color": { "type": "string", "default": "#000" },
            "thickness": { "type": "number", "default": 2 }
          }
        }
      },
      "description": "Line styling. Japanese minimalism: very faint minor lines, bold axes only when needed."
    },
    "dots": {
      "type": "object",
      "description": "For geoboard / dot-grid style.",
      "properties": {
        "show": { "type": "boolean", "default": false },
        "radius": { "type": "number", "default": 3 },
        "color": { "type": "string", "default": "#333" },
        "connectable": { "type": "boolean", "default": true, "description": "Allow runtime to draw rubber-band lines" }
      }
    },
    "labels": {
      "type": "object",
      "properties": {
        "rowLabels": { "type": "array", "items": { "type": "string" }, "description": "Labels on left side" },
        "columnLabels": { "type": "array", "items": { "type": "string" }, "description": "Labels on top/bottom" },
        "cellLabels": {
          "oneOf": [
            { "type": "array", "items": { "type": "array", "items": { "type": "string" } } },
            { "enum": ["multiplication", "coordinates", "fractions", "none"] }
          ],
          "default": "none"
        },
        "font": {
          "type": "object",
          "properties": {
            "size": { "type": "number", "default": 12 },
            "family": { "type": "string", "default": "sans-serif" },
            "color": { "type": "string", "default": "#000" }
          }
        },
        "position": { "enum": ["center", "topLeft", "auto"], "default": "center" }
      }
    },
    "highlights": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "row": { "type": "integer" },
          "column": { "type": "integer" },
          "rowSpan": { "type": "integer", "default": 1 },
          "colSpan": { "type": "integer", "default": 1 },
          "color": { "type": "string", "default": "#bbdefb" },
          "opacity": { "type": "number", "default": 0.4 },
          "label": { "type": "string" }
        }
      },
      "description": "Shade specific cells or rectangular regions (e.g., for area models, probability)."
    },
    "multiplication": {
      "type": "object",
      "description": "Only if style='array' or cellLabels='multiplication'.",
      "properties": {
        "factors": { "type": "array", "items": { "type": "integer" }, "minItems": 2, "maxItems": 2 },
        "showProduct": { "type": "boolean", "default": true }
      }
    },
    "placeValue": {
      "type": "object",
      "description": "Only if style='placeValue'.",
      "properties": {
        "digits": { "type": "array", "items": { "type": "integer" }, "description": "e.g., [4, 0, 7, 2] for 4072" },
        "places": { "enum": ["thousands", "hundreds", "tens", "ones"], "default": "thousands" }
      }
    },
    "interactions": {
      "type": "object",
      "properties": {
        "tapCell": { "type": "boolean", "default": true, "description": "Highlight cell + show value" },
        "draggableRegion": { "type": "boolean", "default": false, "description": "Drag to select rectangle" },
        "sensorLink": {
          "type": "object",
          "properties": {
            "sensor": { "enum": ["accelerometer", "gyro", "light", "none"] },
            "effect": { "enum": ["highlightRow", "highlightColumn", "zoomGrid", "colorShift"] },
            "mapping": { "type": "string" }
          },
          "description": "Example: tilt phone â†’ highlights row/column based on angle"
        },
        "hapticFeedback": {
          "onTapCell": { "enum": ["short", "medium", "none"] },
          "onRegionComplete": { "enum": ["pattern:success", "none"] }
        },
        "animation": {
          "type": "object",
          "properties": {
            "type": { "enum": ["fillCells", "pulseHighlight", "growGrid"] },
            "duration": { "type": "number", "default": 0.8 }
          }
        }
      }
    },
    "accessibility": {
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "desc": { "type": "string", "description": "Describe grid size, highlighted regions, purpose" },
        "ariaGrid": { "type": "boolean", "default": true, "description": "Use role='grid'" },
        "highContrastCells": { "type": "boolean", "default": false }
      }
    },
    "cultural": {
      "type": "object",
      "properties": {
        "motif": { "enum": ["minimalJapanese", "origamiGrid", "weavingLattice", "default"] },
        "colorScheme": { "enum": ["pastelRowsColumns", "monochrome", "placeValueCoding", "auto"] },
        "lineStyle": { "enum": ["cleanThin", "dottedEstimation", "boldAxes"] }
      }
    }
  }
}
