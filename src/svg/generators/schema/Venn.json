{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agni-project.org/schemas/svg-venn-params.json",
  "title": "VennGenerator Parameters",
  "description": "Configuration for generating Venn and Euler diagrams. Supports 2–5 sets, proportional sizing, item lists, probability annotations, and interactive behaviors. Japanese-inspired defaults favor clean lines, high contrast, subtle overlaps, and minimal text clutter.",
  "type": "object",
  "required": ["sets"],
  "additionalProperties": false,
  "properties": {
    "sets": {
      "description": "Array of sets to display. Minimum 2, maximum 5 for readability on small screens.",
      "type": "array",
      "minItems": 2,
      "maxItems": 5,
      "items": {
        "type": "object",
        "required": ["label"],
        "properties": {
          "label": { "type": "string", "description": "Short name of the set (e.g., 'Even', 'Prime', 'A')" },
          "color": { "type": "string", "default": "#auto-cycle", "description": "Fill color; auto-cycles from palette if omitted" },
          "opacity": { "type": "number", "minimum": 0.1, "maximum": 1, "default": 0.35, "description": "Base fill opacity (lower = better overlap visibility)" },
          "stroke": { "type": "string", "default": "#000" },
          "strokeWidth": { "type": "number", "default": 2 }
        }
      }
    },
    "circleCount": {
      "type": "integer",
      "minimum": 2,
      "maximum": 5,
      "default": 2,
      "description": "Number of circles. Must match length of 'sets' unless using Euler mode."
    },
    "style": {
      "type": "string",
      "enum": ["classic", "proportional", "euler", "probability"],
      "default": "classic",
      "description": "Variant: classic = equal circles, proportional = area reflects cardinality, euler = irregular containment, probability = shows formulas."
    },
    "regions": {
      "type": "object",
      "description": "Optional: explicit counts or items per region (overrides auto-calculation). Keys are region codes (e.g., 'A', 'AandB', 'AandBandC', 'outside').",
      "patternProperties": {
        "^[A-Za-z&]+$": {
          "oneOf": [
            { "type": "integer", "minimum": 0 },
            { "type": "array", "items": { "type": "string" }, "description": "List of concrete items (e.g., ['2','4','6'])" }
          ]
        }
      },
      "description": "Used for labeled counts, item lists, or probability calculations."
    },
    "proportional": {
      "type": "boolean",
      "default": false,
      "description": "If true and style='proportional', circle areas scale with total items in each set (approximate overlap)."
    },
    "labels": {
      "type": "object",
      "properties": {
        "showSetLabels": { "type": "boolean", "default": true },
        "showRegionCounts": { "type": "boolean", "default": true },
        "showRegionItems": { "type": "boolean", "default": false, "description": "Show comma-separated item lists in regions (small font)" },
        "font": {
          "type": "object",
          "properties": {
            "size": { "type": "number", "default": 14 },
            "family": { "type": "string", "default": "sans-serif" },
            "color": { "type": "string", "default": "#000" }
          }
        },
        "position": {
          "type": "string",
          "enum": ["auto", "inside", "outside"],
          "default": "auto"
        }
      },
      "description": "Text label control. Japanese style: small, precise, uncluttered."
    },
    "probability": {
      "type": "object",
      "description": "Only relevant if style='probability'. Shows P(A), P(A∪B), etc.",
      "properties": {
        "showFormulas": { "type": "boolean", "default": true },
        "decimalPlaces": { "type": "integer", "minimum": 0, "maximum": 4, "default": 2 },
        "totalUniverse": { "type": "integer", "description": "Total items in sample space (used to compute probabilities)" },
        "highlightConditional": { "type": "string", "description": "e.g., 'A|B' → highlight P(A|B) region" }
      }
    },
    "dimensions": {
      "type": "object",
      "properties": {
        "width": { "type": "number", "minimum": 200, "default": 320 },
        "height": { "type": "number", "minimum": 200, "default": 240 },
        "padding": { "type": "number", "default": 40, "description": "Space around circles" }
      }
    },
    "interactions": {
      "type": "object",
      "description": "Active behaviors the runtime can hook into.",
      "properties": {
        "tapHighlight": { "type": "boolean", "default": true, "description": "Enlarge region or change opacity on tap" },
        "showDetailsOnTap": { "type": "boolean", "default": true, "description": "Pop up tooltip/counts/items list" },
        "sensorLink": {
          "type": "object",
          "properties": {
            "sensor": { "type": "string", "enum": ["accelerometer", "gyro", "light", "none"] },
            "effect": { "type": "string", "enum": ["rotate", "scale", "highlightRegion", "opacity"] },
            "region": { "type": "string", "description": "Which region to affect (e.g., 'AandB')" },
            "mapping": { "type": "string", "description": "Simple formula, e.g., 'value * 0.1'" }
          },
          "description": "Example: tilt phone → rotate whole diagram or fade non-relevant regions"
        },
        "hapticFeedback": {
          "type": "object",
          "properties": {
            "onTapRegion": { "type": "string", "enum": ["short", "medium", "pattern:success"] },
            "onIntersection": { "type": "string", "enum": ["short", "none"] }
          }
        },
        "animation": {
          "type": "object",
          "properties": {
            "type": { "enum": ["fadeIn", "growCircles", "pulseIntersection"] },
            "duration": { "type": "number", "default": 0.8 }
          }
        }
      }
    },
    "accessibility": {
      "type": "object",
      "properties": {
        "title": { "type": "string", "description": "<title> element for screen readers" },
        "desc": { "type": "string", "description": "<desc> element with verbal description" },
        "ariaLive": { "type": "boolean", "default": true, "description": "Announce region changes" },
        "highContrastMode": { "type": "boolean", "default": false }
      }
    },
    "cultural": {
      "type": "object",
      "description": "Aesthetic overrides for epistemic pluralism.",
      "properties": {
        "motif": { "type": "string", "enum": ["minimalJapanese", "weavingCircles", "organicEuler", "default"] },
        "colorPalette": { "type": "string", "enum": ["pastelHarmony", "highContrast", "monochrome", "auto"] },
        "overlapStyle": { "type": "string", "enum": ["blend", "stripe", "texture"] }
      }
    }
  }
}
